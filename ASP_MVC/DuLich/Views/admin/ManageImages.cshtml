@model IEnumerable<DuLich.Models.AnhTour>
@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<h2>Quản lý ảnh Tour @ViewBag.TourId</h2>
<p><a class="btn btn-primary" href="/Admin/Tours">Quay lại</a></p>
<table class="table">
    <thead>
        <tr>
            <th>#</th>
            <th>Xem trước</th>
            <th>Loại</th>
            <th>Mô tả</th>
            <th>Ngày tải</th>
            <th>Hành động</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var i in Model)
        {
            <tr>
                <td>@i.MaAnh</td>
                <td>
                    @if (i.DuLieuAnh != null && i.DuLieuAnh.Length > 0)
                    {
                        <img src="/api/image/@i.MaAnh" alt="@i.MoTa" style="max-width: 100px; max-height: 100px;" class="rounded">
                    }
                </td>
                <td>@i.LoaiAnh</td>
                <td>@i.MoTa</td>
                <td>@i.NgayTaiLen?.ToString("dd/MM/yyyy HH:mm")</td>
                <td>
                    <form method="post" action="/Admin/DeleteImage" style="display:inline">
                        <input type="hidden" name="id" value="@i.MaAnh" />
                        <input type="hidden" name="tourId" value="@ViewBag.TourId" />
                        <button class="btn btn-sm btn-danger" type="submit">Xóa</button>
                    </form>
                </td>
            </tr>
        }
    </tbody>
</table>